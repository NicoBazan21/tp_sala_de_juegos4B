"use strict";(self.webpackChunktp1_sala_de_juegos=self.webpackChunktp1_sala_de_juegos||[]).push([[173],{173:(v,l,a)=>{a.r(l),a.d(l,{ChatModule:()=>M});var s=a(6895),g=a(5450),i=a(433),t=a(8256),m=a(9682),r=a(3562),h=a(7396);let f=(()=>{class n{constructor(e){this.firestore=e,this.coleccionUsuarios=(0,r.hJ)(this.firestore,"chats")}traerChats(){const e=(0,r.IO)(this.coleccionUsuarios,(0,r.Xo)("fecha","asc"));return(0,r.BS)(e)}subirMensaje(e,o){const c=(0,r.JU)(this.coleccionUsuarios),p=c.id,P=h.EK.fromDate(new Date);return(0,r.pl)(c,{id:p,mail:e,fecha:P,mensaje:o})}static#t=this.\u0275fac=function(o){return new(o||n)(t.LFG(r.gg))};static#n=this.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),u=(()=>{class n{constructor(e){this.datePipe=e}transform(e){return this.datePipe.transform(e?.toMillis(),"short")??""}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(s.uU,16))};static#n=this.\u0275pipe=t.Yjl({name:"dateFormat",type:n,pure:!0})}return n})();function b(n,d){if(1&n&&(t.ynx(0),t.TgZ(1,"div",19)(2,"div",20)(3,"h6"),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.TgZ(7,"time",21),t._uU(8),t.ALo(9,"dateFormat"),t.qZA()()()(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.mail),t.xp6(2),t.hij(" ",e.mensaje," "),t.xp6(2),t.Oqu(t.lcZ(9,3,e.fecha))}}function x(n,d){if(1&n&&(t.ynx(0),t.TgZ(1,"div",22)(2,"div",23)(3,"h6",24),t._uU(4),t.qZA(),t.TgZ(5,"p"),t._uU(6),t.TgZ(7,"time",21),t._uU(8),t.ALo(9,"dateFormat"),t.qZA()()()(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(e.mail),t.xp6(2),t.hij(" ",e.mensaje," "),t.xp6(2),t.Oqu(t.lcZ(9,3,e.fecha))}}function C(n,d){if(1&n&&(t.ynx(0),t.YNc(1,b,10,5,"ng-container",18),t.YNc(2,x,10,5,"ng-container",18),t.BQk()),2&n){const e=d.$implicit,o=t.oxw();t.xp6(1),t.Q6J("ngIf",e.mail!=o.mailActual),t.xp6(1),t.Q6J("ngIf",e.mail==o.mailActual)}}const _=[{path:"",component:(()=>{class n{constructor(e,o){this.userService=e,this.chatService=o,this.mailActual=""}ngOnInit(){this.form=new i.cw({mensaje:new i.NI("",[i.kI.required])},i.kI.required),this.chats=this.chatService.traerChats(),this.mailActual=this.userService.sesionFirestore.mail}enviarMensaje(){if(this.form.valid){let o=this.mensaje?.value;this.chatService.subirMensaje(this.userService.sesionFirestore.mail,o),this.mensaje?.patchValue("")}}get mensaje(){return this.form.get("mensaje")}static#t=this.\u0275fac=function(o){return new(o||n)(t.Y36(m.R),t.Y36(f))};static#n=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-chat"]],decls:21,vars:4,consts:[["id","page-content",1,"page-content","page-container"],[1,"padding"],[1,"row","container","d-flex","justify-content-center"],[1,"col-md",2,"opacity","0.9"],[1,"card","card-bordered"],[1,"card-header","fondo"],[1,"card-title"],["id","chat-content",1,"ps-container","ps-theme-default","ps-active-y",2,"overflow-y","scroll !important","height","400px !important"],[4,"ngFor","ngForOf"],[1,"ps-scrollbar-x-rail",2,"left","0px","bottom","0px"],["tabindex","0",1,"ps-scrollbar-x",2,"left","0px","width","0px"],[1,"ps-scrollbar-y-rail",2,"top","0px","height","0px","right","2px"],["tabindex","0",1,"ps-scrollbar-y",2,"top","0px","height","2px"],[1,"publisher","bt-1","border-light",3,"formGroup"],["type","text","placeholder","Esribe aqui...","formControlName","mensaje",1,"publisher-input",3,"keyup.enter"],[1,"publisher-btn","file-group"],["data-abc","true",1,"publisher-btn","text-info",3,"click"],[1,"fa","fa-paper-plane"],[4,"ngIf"],[1,"media","media-chat"],[1,"media-body"],[1,"chat-date"],[1,"media","media-chat","media-chat-reverse"],[1,"media-body",2,"background-color","#48b0f7"],[1,"text-white"]],template:function(o,c){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h4",6)(7,"strong"),t._uU(8,"Chat"),t.qZA()()(),t.TgZ(9,"div",7),t.YNc(10,C,3,2,"ng-container",8),t.ALo(11,"async"),t.TgZ(12,"div",9),t._UZ(13,"div",10),t.qZA(),t.TgZ(14,"div",11),t._UZ(15,"div",12),t.qZA()(),t.TgZ(16,"div",13)(17,"input",14),t.NdJ("keyup.enter",function(){return c.enviarMensaje()}),t.qZA(),t._UZ(18,"span",15),t.TgZ(19,"a",16),t.NdJ("click",function(){return c.enviarMensaje()}),t._UZ(20,"i",17),t.qZA()()()()()()()),2&o&&(t.xp6(10),t.Q6J("ngForOf",t.lcZ(11,2,c.chats)),t.xp6(6),t.Q6J("formGroup",c.form))},dependencies:[s.sg,s.O5,i.Fj,i.JJ,i.JL,i.sg,i.u,s.Ov,u],styles:['.card-bordered[_ngcontent-%COMP%]{border:1px solid #ebebeb}.card[_ngcontent-%COMP%]{border:0;border-radius:0;margin-bottom:30px;box-shadow:0 2px 3px #00000008;transition:.5s}.padding[_ngcontent-%COMP%]{padding:3rem!important}body[_ngcontent-%COMP%]{background-color:#f9f9fa}.card-header[_ngcontent-%COMP%]:first-child{border-radius:calc(.25rem - 1px) calc(.25rem - 1px) 0 0}.card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:15px 20px;background-color:transparent;border-bottom:1px solid rgba(77,82,89,.07)}.card-header[_ngcontent-%COMP%]   .card-title[_ngcontent-%COMP%]{padding:0;border:none}h4.card-title[_ngcontent-%COMP%]{font-size:17px}.card-header[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:last-child{margin-right:0}.card-header[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-left:8px;margin-right:8px}.btn-secondary[_ngcontent-%COMP%]{color:#4d5259!important;background-color:#e4e7ea;border-color:#e4e7ea;color:#fff}.btn-xs[_ngcontent-%COMP%]{font-size:11px;padding:2px 8px;line-height:18px}.btn-xs[_ngcontent-%COMP%]:hover{color:#fff!important}.card-title[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-weight:300;line-height:1.5;margin-bottom:0;padding:15px 20px;border-bottom:1px solid rgba(77,82,89,.07)}.ps-container[_ngcontent-%COMP%]{position:relative}.ps-container[_ngcontent-%COMP%]{touch-action:auto;overflow:hidden!important;-ms-overflow-style:none}.media[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{flex-shrink:0}.avatar[_ngcontent-%COMP%]{position:relative;display:inline-block;width:36px;height:36px;line-height:36px;text-align:center;border-radius:100%;background-color:#f5f6f7;color:#8b95a5;text-transform:uppercase}.media-chat[_ngcontent-%COMP%]   .media-body[_ngcontent-%COMP%]{flex:initial;display:table}.chat-date[_ngcontent-%COMP%]{position:relative;top:12px;padding-left:10px;font-size:.7rem}.media-body[_ngcontent-%COMP%]{position:relative;padding:2px 4px;background-color:#f5f6f7;border-radius:5px;color:#9b9b9b}h6[_ngcontent-%COMP%]{font-size:smaller}.media[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 8px}.media-chat[_ngcontent-%COMP%]   .media-body[_ngcontent-%COMP%]   p.meta[_ngcontent-%COMP%]{background-color:transparent!important;padding:0;opacity:.8}.media-meta-day[_ngcontent-%COMP%]{justify-content:space-between;align-items:center;margin-bottom:0;color:#8b95a5;opacity:.8;font-weight:400}.media-meta-day[_ngcontent-%COMP%]:before{margin-right:16px}.media-meta-day[_ngcontent-%COMP%]:before, .media-meta-day[_ngcontent-%COMP%]:after{content:"";flex:1 1;border-top:1px solid #ebebeb}.media-meta-day[_ngcontent-%COMP%]:after{content:"";flex:1 1;border-top:1px solid #ebebeb}.media-meta-day[_ngcontent-%COMP%]:after{margin-left:16px}.media-chat.media-chat-reverse[_ngcontent-%COMP%]{padding-left:78%;flex-direction:row-reverse}.media-chat[_ngcontent-%COMP%]{padding-right:64px;margin-bottom:0}.media[_ngcontent-%COMP%]{padding:16px 12px;transition:background-color .2s linear}.media-chat.media-chat-reverse[_ngcontent-%COMP%]   .media-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{float:right;clear:right;padding:2px 4px;bottom:2px;margin:4px 0;background-color:#48b0f7;color:#fff}.media-chat[_ngcontent-%COMP%]   .media-body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:relative;padding:2px 4px;bottom:2px;margin:4px 0;background-color:#f5f6f7;border-radius:3px}.border-light[_ngcontent-%COMP%]{border-color:#f1f2f3!important}.bt-1[_ngcontent-%COMP%]{border-top:1px solid #ebebeb!important}.publisher[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;padding:12px 20px;background-color:#f9fafb}.publisher[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:first-child{margin-left:0}.publisher[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:0 8px}.publisher-input[_ngcontent-%COMP%]{flex-grow:1;border:none;outline:none!important;background-color:transparent}button[_ngcontent-%COMP%], input[_ngcontent-%COMP%], optgroup[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-weight:300}.publisher-btn[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#8b95a5;font-size:16px;cursor:pointer;overflow:-moz-hidden-unscrollable;transition:.2s linear}.file-group[_ngcontent-%COMP%]{position:relative;overflow:hidden}.publisher-btn[_ngcontent-%COMP%]{background-color:transparent;border:none;color:#cac7c7;font-size:16px;cursor:pointer;overflow:-moz-hidden-unscrollable;transition:.2s linear}.file-group[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;opacity:0;z-index:-1;width:20px}.text-info[_ngcontent-%COMP%]{color:#48b0f7!important}.fondo[_ngcontent-%COMP%]{color:#fff;border-radius:20px;background:linear-gradient(to right,#4e1637,rgb(37,53,196));opacity:.8}']})}return n})()}];let O=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#n=this.\u0275mod=t.oAB({type:n});static#e=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(_),g.Bz]})}return n})(),M=(()=>{class n{static#t=this.\u0275fac=function(o){return new(o||n)};static#n=this.\u0275mod=t.oAB({type:n});static#e=this.\u0275inj=t.cJS({providers:[s.uU],imports:[s.ez,O,i.UX]})}return n})()}}]);